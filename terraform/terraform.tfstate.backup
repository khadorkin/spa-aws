{
    "version": 1,
    "serial": 15,
    "modules": [
        {
            "path": [
                "root"
            ],
            "outputs": {},
            "resources": {
                "aws_dynamodb_table.problems": {
                    "type": "aws_dynamodb_table",
                    "primary": {
                        "id": "problems",
                        "attributes": {
                            "arn": "arn:aws:dynamodb:us-east-1:655508188333:table/problems",
                            "attribute.#": "2",
                            "attribute.47822141.name": "problemId",
                            "attribute.47822141.type": "N",
                            "attribute.90934062.name": "userId",
                            "attribute.90934062.type": "S",
                            "global_secondary_index.#": "0",
                            "hash_key": "userId",
                            "id": "problems",
                            "name": "problems",
                            "range_key": "problemId",
                            "read_capacity": "5",
                            "write_capacity": "5"
                        }
                    }
                },
                "aws_iam_role.cognito_role": {
                    "type": "aws_iam_role",
                    "depends_on": [
                        "template_file.generated_role_policy",
                        "template_file.generated_role_policy"
                    ],
                    "primary": {
                        "id": "id_pool1_cognito_role",
                        "attributes": {
                            "arn": "arn:aws:iam::655508188333:role/id_pool1_cognito_role",
                            "assume_role_policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"Federated\": \"cognito-identity.amazonaws.com\"\n      },\n      \"Action\": \"sts:AssumeRoleWithWebIdentity\",\n      \"Condition\": {\n        \"StringEquals\": {\n          \"cognito-identity.amazonaws.com:aud\": \"us-east-1:64bf0f61-7d6b-446e-9481-e1b7c10b10f9\"\n        },\n        \"ForAnyValue:StringLike\": {\n          \"cognito-identity.amazonaws.com:amr\": \"authenticated\"\n        }\n      }\n    }\n  ]\n}\n",
                            "id": "id_pool1_cognito_role",
                            "name": "id_pool1_cognito_role",
                            "path": "/",
                            "unique_id": "AROAIDXVOTSV52LVC5G6C"
                        }
                    }
                },
                "aws_iam_role.iam_for_lambda": {
                    "type": "aws_iam_role",
                    "primary": {
                        "id": "iam_for_lambda",
                        "attributes": {
                            "arn": "arn:aws:iam::655508188333:role/iam_for_lambda",
                            "assume_role_policy": "{\r\n  \"Version\": \"2012-10-17\",\r\n  \"Statement\": [\r\n    {\r\n      \"Action\": \"sts:AssumeRole\",\r\n      \"Principal\": {\r\n        \"Service\": \"lambda.amazonaws.com\"\r\n      },\r\n      \"Effect\": \"Allow\",\r\n      \"Sid\": \"\"\r\n    }\r\n  ]\r\n}\r\n",
                            "id": "iam_for_lambda",
                            "name": "iam_for_lambda",
                            "path": "/",
                            "unique_id": "AROAIXHX7MUXJLH2SLOGI"
                        }
                    }
                },
                "aws_iam_role_policy.dynamodb_access_policy": {
                    "type": "aws_iam_role_policy",
                    "depends_on": [
                        "aws_dynamodb_table.problems",
                        "aws_iam_role.cognito_role",
                        "aws_iam_role.cognito_role"
                    ],
                    "primary": {
                        "id": "id_pool1_cognito_role:dynamodb_access_policy",
                        "attributes": {
                            "id": "id_pool1_cognito_role:dynamodb_access_policy",
                            "name": "dynamodb_access_policy",
                            "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [{ \n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"dynamodb:BatchGetItem\",\n        \"dynamodb:BatchWriteItem\",\n        \"dynamodb:DeleteItem\",\n        \"dynamodb:GetItem\",\n        \"dynamodb:PutItem\",\n        \"dynamodb:Query\",\n        \"dynamodb:UpdateItem\"\n      ],\n      \"Resource\": [\"arn:aws:dynamodb:us-east-1:655508188333:table/problems\"],\n      \"Condition\": {\n        \"ForAllValues:StringEquals\": {\n          \"dynamodb:LeadingKeys\": [\"${cognito-identity.amazonaws.com:sub}\"]\n        }\n      }\n  }]\n}\n",
                            "role": "id_pool1_cognito_role"
                        }
                    }
                },
                "aws_lambda_function.check_answer_lambda": {
                    "type": "aws_lambda_function",
                    "depends_on": [
                        "aws_iam_role.iam_for_lambda"
                    ],
                    "primary": {
                        "id": "checkAnswer",
                        "attributes": {
                            "arn": "arn:aws:lambda:us-east-1:655508188333:function:checkAnswer",
                            "description": "",
                            "filename": "/mnt/spa/terraform/../services/checkAnswer/archive.zip",
                            "function_name": "checkAnswer",
                            "handler": "exports.checkAnswer",
                            "id": "checkAnswer",
                            "last_modified": "2016-05-05T13:25:42.999+0000",
                            "memory_size": "128",
                            "role": "arn:aws:iam::655508188333:role/iam_for_lambda",
                            "runtime": "nodejs4.3",
                            "source_code_hash": "e5GLwB8m3n+1/dff0pdwIQxn3TWLo9k6F/nYLoeP3FQ=",
                            "timeout": "3"
                        }
                    }
                },
                "null_resource.build_bundle": {
                    "type": "null_resource",
                    "primary": {
                        "id": "8836080883656223463",
                        "attributes": {
                            "id": "8836080883656223463"
                        }
                    }
                },
                "null_resource.config": {
                    "type": "null_resource",
                    "depends_on": [
                        "template_file.config",
                        "template_file.config"
                    ],
                    "primary": {
                        "id": "5179650068832549677",
                        "attributes": {
                            "id": "5179650068832549677"
                        }
                    }
                },
                "null_resource.create_identity_pool": {
                    "type": "null_resource",
                    "primary": {
                        "id": "3113019670626226826",
                        "attributes": {
                            "id": "3113019670626226826"
                        }
                    }
                },
                "null_resource.update_identity_pool_role": {
                    "type": "null_resource",
                    "depends_on": [
                        "aws_iam_role.cognito_role",
                        "aws_iam_role.cognito_role"
                    ],
                    "primary": {
                        "id": "4985117374178281994",
                        "attributes": {
                            "id": "4985117374178281994"
                        }
                    }
                },
                "template_file.config": {
                    "type": "template_file",
                    "depends_on": [
                        "null_resource.update_identity_pool_role"
                    ],
                    "primary": {
                        "id": "903aad6846fb2ec45389b8f7e6205c6bf853e0e2fb3f3f715f17dd4313fffbd1",
                        "attributes": {
                            "id": "903aad6846fb2ec45389b8f7e6205c6bf853e0e2fb3f3f715f17dd4313fffbd1",
                            "rendered": "cognito = {\r\n    'poolId': '#poolId'\r\n}",
                            "template": "cognito = {\r\n    'poolId': '#poolId'\r\n}"
                        }
                    }
                },
                "template_file.generated_role_policy": {
                    "type": "template_file",
                    "depends_on": [
                        "null_resource.create_identity_pool"
                    ],
                    "primary": {
                        "id": "fcb0c6e4943f6ed9f98398bb86172e958849bac446455429a5507d85f30cf03c",
                        "attributes": {
                            "id": "fcb0c6e4943f6ed9f98398bb86172e958849bac446455429a5507d85f30cf03c",
                            "rendered": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"Federated\": \"cognito-identity.amazonaws.com\"\n      },\n      \"Action\": \"sts:AssumeRoleWithWebIdentity\",\n      \"Condition\": {\n        \"StringEquals\": {\n          \"cognito-identity.amazonaws.com:aud\": \"us-east-1:64bf0f61-7d6b-446e-9481-e1b7c10b10f9\"\n        },\n        \"ForAnyValue:StringLike\": {\n          \"cognito-identity.amazonaws.com:amr\": \"authenticated\"\n        }\n      }\n    }\n  ]\n}\n",
                            "template": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"Federated\": \"cognito-identity.amazonaws.com\"\n      },\n      \"Action\": \"sts:AssumeRoleWithWebIdentity\",\n      \"Condition\": {\n        \"StringEquals\": {\n          \"cognito-identity.amazonaws.com:aud\": \"us-east-1:64bf0f61-7d6b-446e-9481-e1b7c10b10f9\"\n        },\n        \"ForAnyValue:StringLike\": {\n          \"cognito-identity.amazonaws.com:amr\": \"authenticated\"\n        }\n      }\n    }\n  ]\n}\n"
                        }
                    }
                }
            }
        }
    ]
}
